var monthCalendarGen=function(e,t){var d,a=/^-?[0-9]{1,2}$/,n=/^-?[0-9]{4}$/;d=void 0!==e&&void 0!==t&&n.test(e)&&a.test(t)?new Date(e,t):new Date;var r=new Date,l=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=d.getMonth(),o=d.getFullYear(),c=new Date(d.getFullYear(),d.getMonth(),1),i=new Date(d.getFullYear(),d.getMonth()+1,0),h=new Date(d.getFullYear(),d.getMonth(),1-c.getDay()),u=new Date(d.getFullYear(),d.getMonth()+1,13-i.getDay()),v=function(){for(var e=[],t=6,a=0;t>a;a++){for(var n=[],d=new Date(h.getFullYear(),h.getMonth(),h.getDate()+7*a),r=0;7>r;r++){var l=new Date(d.getFullYear(),d.getMonth(),d.getDate()+r);n.push(l)}e.push(n)}return e},m=function(e,t){t(e)},p=function(e,t){void 0===t&&(t={});var a={months:t.months||["January","February","March","April","May","June","July","August","September","October","November","December"],weekDays:t.weekDays||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],sendDateTo:t.sendDateTo,table:t.table||!1,hasButtons:t.hasButtons||!1,butBackChar:t.butBackChar||"«",butNextChar:t.butNextChar||"»"},n=function(a){e.innerHTML="",monthCalendarGen(o,s+a).constructSheet(e,t)},r=v(d),c=document.createElement(a.table?"table":"div");c.classList.add("month");var i=document.createElement(a.table?"thead":"div");i.classList.add("month-head");var h=document.createElement(a.table?"tbody":"div");h.classList.add("month-body");var u=document.createElement(a.table?"tr":"div");u.classList.add("month-head-line"),i.appendChild(u);var p=document.createElement(a.table?"th":"div");p.classList.add("button-before"),p.colSpan="1",a.hasButtons&&(p.appendChild(document.createTextNode(a.butBackChar)),p.onclick=function(){n(-1)});var f=document.createElement(a.table?"th":"div");f.classList.add("year-title"),f.colSpan="2";var D=document.createTextNode(o);f.appendChild(D);var b=document.createElement(a.table?"th":"div");b.colSpan="3",b.classList.add("month-title");var g=document.createTextNode(a.months[s]);b.appendChild(g);var C=document.createElement(a.table?"th":"div");C.classList.add("button-next"),C.colSpan="1",a.hasButtons&&(C.appendChild(document.createTextNode(a.butNextChar)),C.onclick=function(){n(1)}),u.appendChild(p),u.appendChild(f),u.appendChild(b),u.appendChild(C);var y=document.createElement(a.table?"tr":"div");y.classList.add("weekdays"),i.appendChild(y);for(var w=0;w<a.weekDays.length;w++){var L=document.createElement(a.table?"th":"div");L.classList.add("weekday");var M=document.createTextNode(a.weekDays[w]);L.appendChild(M),y.appendChild(L)}c.appendChild(i),c.appendChild(h),e.appendChild(c);for(var E=0;E<r.length;E++){u=document.createElement(a.table?"tr":"div"),u.classList.add("week");for(var T=0;T<r[E].length;T++){var k=document.createElement(a.table?"td":"div");r[E][T].getMonth()<s?k.classList.add("last-month"):r[E][T].getMonth()>s?k.classList.add("next-month"):Date.parse(r[E][T])==Date.parse(l)&&k.classList.add("today"),k.classList.add("day");var x=document.createTextNode(r[E][T].getDate());k.dataset.date=Date.parse(r[E][T]),a.sendDateTo&&(k.onclick=function(){for(var e=document.getElementsByClassName("active-day"),t=0;t<e.length;t++)e[t].classList.remove("active-day");this.classList.add("active-day"),m(this.dataset.date,a.sendDateTo)}),k.appendChild(x),u.appendChild(k)}h.appendChild(u)}};return{month:s,year:o,today:l,now:r,firstMonthDay:c,lastMonthDay:i,firstCalendarDay:h,lastCalendarDay:u,run:function(){return v()},constructSheet:function(e,t){p(e,t)}}};